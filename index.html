<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>متنبئ إشارات لعبة Aviator - المغرب (Melbet)</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet"/>
    <style>
      body{font-family:"Montserrat",sans-serif;background-color:#121212;color:#fff;text-align:center;margin:0;padding:20px;min-height:100vh;display:flex;justify-content:center;align-items:center;direction:rtl}
      body.modal-open{overflow:hidden}
      .game-container{max-width:600px;width:100%;margin:0 auto;background:#1e1e1e;border-radius:15px;padding:25px;box-shadow:0 10px 30px rgba(0,0,0,.3);transform:translateY(0);transition:.3s;position:relative}
      .game-container:hover{transform:translateY(-5px)}
      h1{color:#ffcc00;margin-bottom:10px;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.3)}
      .badges{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-bottom:10px}
      .badge{display:inline-block;padding:6px 10px;border-radius:8px;background:#064e3b;color:#a7f3d0;font-weight:700;font-size:13px}
      .aviator-display{height:200px;background:#2a2a2a;border-radius:10px;margin:25px 0;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;overflow:hidden}
      .multiplier{font-size:47px;font-weight:600;color:#00cc66;margin-bottom:20px;text-shadow:0 0 10px rgba(0,204,102,.5);animation:float 3s ease-in-out infinite}
      .bet-amount{font-size:20px;font-weight:600;color:#ffcc00;margin:15px 0;text-shadow:0 0 10px rgba(255,204,0,.3)}
      .history-container{max-height:120px;overflow-y:auto;margin-bottom:25px;padding:10px;background:#2a2a2a;border-radius:10px}
      .history{display:flex;flex-direction:column;gap:8px}
      .history-item{padding:10px;border-radius:8px;display:flex;justify-content:space-between;background:rgba(255,204,0,.1);border-right:4px solid #ffcc00}
      .history-multiplier{font-weight:600;color:#ffcc00}
      .history-result{font-weight:600}
      .success{color:#00cc66}.fail{color:#ff4444}
      .controls{margin-top:30px;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}
      button{background:#ffcc00;color:#121212;border:none;padding:14px 30px;border-radius:8px;font-weight:600;cursor:pointer;transition:.3s;font-size:16px;letter-spacing:.3px;box-shadow:0 4px 6px rgba(0,0,0,.1);position:relative;overflow:hidden;width:220px}
      button:hover{background:#ffdd33;transform:translateY(-3px);box-shadow:0 7px 14px rgba(0,0,0,.2)}
      button:active{transform:translateY(1px)}
      button:disabled{background:#444;color:#777;cursor:not-allowed;transform:none;box-shadow:none}
      button::after{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 25%,rgba(255,255,255,.1) 50%,transparent 75%);background-size:400% 400%;opacity:0;transition:.5s}
      button:hover::after{opacity:1;animation:shine 1.5s infinite}
      input{padding:10px 20px;border-radius:8px;background:#333;color:#fff;border:none;font-size:16px;transition:.3s;box-shadow:0 2px 5px rgba(0,0,0,.2);width:240px;text-align:center}
      input:invalid{border:2px solid #ff4444} input:valid{border:2px solid #00cc66} input:hover{background:#444}
      label{display:block;margin-bottom:8px;font-weight:600;color:#ddd}
      .hidden{display:none}
      .id-form{display:flex;flex-direction:column;align-items:center;gap:14px;margin-bottom:20px}
      .error-message{color:#ff4444;margin-top:5px;font-size:14px;min-height:20px}
      .loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:.3s}
      .loading-overlay.active{opacity:1;visibility:visible}
      .loading-spinner{width:50px;height:50px;border:5px solid rgba(255,204,0,.3);border-radius:50%;border-top-color:#ffcc00;animation:spin 1s ease-in-out infinite;margin-bottom:20px}
      .loading-text{color:#ffcc00;font-size:18px;font-weight:600}
      .how-to-use-btn{background:transparent;border:2px solid #ffcc00;color:#ffcc00;margin:0 auto 15px;width:90%;max-width:420px;white-space:nowrap}
      .how-to-use-btn:hover{background:rgba(255,204,0,.1)}
      .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:.3s}
      .modal-overlay.active{opacity:1;visibility:visible}
      .modal-content{background:#1e1e1e;border-radius:15px;padding:30px;max-width:520px;width:90%;position:relative;transform:translateY(20px);transition:.3s;box-shadow:0 10px 30px rgba(0,0,0,.5);text-align:right}
      .modal-overlay.active .modal-content{transform:translateY(0)}
      .close-modal{position:absolute;top:15px;left:15px;font-size:24px;color:#aaa;cursor:pointer;transition:.3s}
      .close-modal:hover{color:#ff4444}
      .modal-title{color:#ffcc00;margin-bottom:14px;font-size:22px}
      .modal-text{line-height:1.7;margin-bottom:10px}
      .modal-text ol{padding-right:18px}
      .modal-text li{margin-bottom:10px}
      .modal-text strong{color:#ffcc00}
      @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-5px)}100%{transform:translateY(0)}}
      @keyframes shine{0%{background-position:100% 50%}100%{background-position:0% 50%}}
      @keyframes spin{to{transform:rotate(360deg)}}
      ::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#1e1e1e;border-radius:4px}::-webkit-scrollbar-thumb{background:#ffcc00;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#ffdd33}
    </style>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
      <div class="loading-spinner"></div>
      <div class="loading-text">جارٍ التحقق من المعرف...</div>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay">
      <div class="modal-content">
        <span class="close-modal" id="close-modal">&times;</span>
        <h3 class="modal-title">كيفية استخدام البوت</h3>
        <div class="modal-text">
          <ol>
            <li><strong>أولًا:</strong> اضغط على زر «الحصول على مبلغ الرهان» لمعرفة المبلغ المطلوب.</li>
            <li><strong>يَجِب</strong> وضع رهانك على Melbet بالمبلغ المعروض أولًا، ثم اضغط «الحصول على الإشارة».</li>
          </ol>
          <p>هذه هي الطريقة الوحيدة لتحقيق الربح.</p>
          <p>إذا أخذت إشارة ولم تضع الرهان للتحقق، فستكون الإشارة غير دقيقة لأن البوت لا يرى رهانك ولا يستطيع تحليل الإشارة الرابحة.</p>
          <p>إذا خسرت، فقد يعني ذلك أنك لا تتبع الخطوات بشكل صحيح. إن كنت متأكدًا من التزامك، جرّب متصفحًا آخر أو VPN.</p>
          <div class="badges" style="margin-top:10px;">
            <span class="badge">رمز ترويجي: MHS77</span>
            <span class="badge">الحد الأدنى للإيداع: 50 MAD</span>
            <span class="badge">الحد الأقصى للرهان لكل إشارة: 25 MAD</span>
          </div>
        </div>
      </div>
    </div>

    <div class="game-container">
      <h1>متنبئ إشارات لعبة Aviator — المغرب (Melbet)</h1>
      <div class="badges">
        <span class="badge">المغرب</span>
        <span class="badge">العملة: MAD</span>
      </div>
      <button class="how-to-use-btn" id="how-to-use-btn">كيفية استخدام البوت</button>

      <div class="id-form" id="id-form">
        <div class="setting-group">
          <label for="user-id">أدخل معرف حساب Melbet الخاص بك</label>
          <input type="text" id="user-id" pattern="\d{6,}" inputmode="numeric" placeholder="معرف Melbet (6 أرقام على الأقل)" required title="الرجاء إدخال 6 أرقام على الأقل"/>
          <div class="error-message" id="error-message"></div>
        </div>
        <button id="verify-btn" disabled>تحقق من المعرف</button>
      </div>

      <div id="game-content" class="hidden">
        <div class="aviator-display">
          <div class="multiplier" id="multiplier">احصل على إشارتك</div>
        </div>

        <div class="bet-amount hidden" id="bet-amount-container">
          قيمة رهانك: <span id="bet-amount">0</span> MAD
        </div>

        <div class="history-container">
          <div class="history" id="history"></div>
        </div>

        <div class="controls">
          <button id="get-bet-btn" onclick="getBetAmount()">الحصول على مبلغ الرهان</button>
          <button id="predict-btn" onclick="getPrediction()" disabled>الحصول على الإشارة</button>
        </div>
      </div>
    </div>

    <script>
      const CURRENCY="MAD",MAX_STAKE=25,MIN_STAKE=5;

      const idForm=document.getElementById("id-form");
      const gameContent=document.getElementById("game-content");
      const userIdInput=document.getElementById("user-id");
      const verifyBtn=document.getElementById("verify-btn");
      const errorMessage=document.getElementById("error-message");
      const multiplierElement=document.getElementById("multiplier");
      const betAmountContainer=document.getElementById("bet-amount-container");
      const betAmountElement=document.getElementById("bet-amount");
      const historyElement=document.getElementById("history");
      const predictButton=document.getElementById("predict-btn");
      const getBetButton=document.getElementById("get-bet-btn");
      const loadingOverlay=document.getElementById("loading-overlay");
      const howToUseBtn=document.getElementById("how-to-use-btn");
      const modalOverlay=document.getElementById("modal-overlay");
      const closeModal=document.getElementById("close-modal");

      function isValidId(v){return /^\d{6,}$/.test(v);}

      userIdInput.addEventListener("input",()=>{
        const v=userIdInput.value.trim().replace(/\D/g,"");
        userIdInput.value=v;
        const ok=isValidId(v);
        verifyBtn.disabled=!ok;
        errorMessage.textContent=ok?"":"أدخل 6 أرقام على الأقل";
      });

      howToUseBtn.addEventListener("click",()=>{document.body.classList.add("modal-open");modalOverlay.classList.add("active");});
      closeModal.addEventListener("click",()=>{document.body.classList.remove("modal-open");modalOverlay.classList.remove("active");});
      modalOverlay.addEventListener("click",(e)=>{if(e.target===modalOverlay){document.body.classList.remove("modal-open");modalOverlay.classList.remove("active");}});

      verifyBtn.addEventListener("click",()=>{
        const id=userIdInput.value.trim();
        if(!isValidId(id)){errorMessage.textContent="صيغة المعرف غير صحيحة";return;}
        localStorage.setItem("melbetId",id);
        loadingOverlay.classList.add("active");
        setTimeout(()=>{
          loadingOverlay.classList.remove("active");
          idForm.remove();
          gameContent.classList.remove("hidden");
        },2000);
      });

      (function(){
        const p=new URLSearchParams(location.search);
        const qid=p.get("uid")||localStorage.getItem("melbetId");
        if(qid&&isValidId(qid)){userIdInput.value=qid;userIdInput.dispatchEvent(new Event("input"))}
      })();

      function getBetAmount(){
        if(predictButton.disabled===false) return;
        getBetButton.disabled=true; getBetButton.textContent="جارٍ التوليد...";
        setTimeout(()=>{
          const rnd=Math.floor(Math.random()*(MAX_STAKE-MIN_STAKE+1))+MIN_STAKE;
          betAmountElement.textContent=String(rnd);
          betAmountContainer.classList.remove("hidden");
          predictButton.disabled=false;
          getBetButton.textContent="الحصول على مبلغ الرهان";
          getBetButton.disabled=false;
        },800);
      }

      function getPrediction(){
        if(predictButton.disabled) return;
        predictButton.disabled=true; getBetButton.disabled=true;
        predictButton.textContent="الذكاء الاصطناعي يُحلّل...";
        multiplierElement.textContent="1.00"; multiplierElement.style.color="#00cc66";

        const crashMultiplier=(1.5+Math.random()*8.5).toFixed(2);
        const predictionMultiplier=Math.max(1.2,(crashMultiplier-0.5-Math.random()*0.7).toFixed(2));

        let currentPos=0, crashPos=((crashMultiplier-1)/9)*100, predictPos=((predictionMultiplier-1)/9)*100;
        const interval=setInterval(()=>{
          currentPos+=1.5;
          const current=(1+(currentPos/100)*9).toFixed(2);
          multiplierElement.textContent=current+" ×";
          if(currentPos>=predictPos){multiplierElement.style.color="#ffcc00";}
          if(currentPos>=crashPos){
            clearInterval(interval);
            multiplierElement.textContent=predictionMultiplier+" ×";
            multiplierElement.style.color="#00cc66";
            addToHistory(predictionMultiplier,crashMultiplier);
            setTimeout(()=>{
              predictButton.disabled=true;
              predictButton.textContent="الحصول على الإشارة";
              getBetButton.disabled=false;
              betAmountContainer.classList.add("hidden");
            },1000);
          }
        },50);
      }

      function addToHistory(prediction,crash){
        const success=parseFloat(crash)>=parseFloat(prediction);
        const item=document.createElement("div");
        item.className="history-item";
        item.innerHTML=`<span class="history-multiplier">${prediction}x</span>
                        <span class="history-result ${success?"success":"fail"}">${success?"سحب":""}</span>`;
        historyElement.insertBefore(item,historyElement.firstChild);
      }
    </script>
  </body>
</html>
